会话实际上只是更方便的状态维护方法。要实现会话，必须在客户端存些东西，否则服务器无法从一个请求到下一个请求中识别客户端。通常的做法是用一个包含唯一标示的cookie，然后服务器用这个标识获取相应的会话信息。

实现会话的方法：

- 把所有东西都存在cookie里（cookie-）
- 只在cookie里存一个唯一标识，其他东西存在服务器上

## 内存存储

入门级的选择是内存会话，但是重启服务器后会话就消失了。如果扩展了多台服务器，那么每次请求可能是由不同服务器处理的，所以会话可能不在。

中间件express-session接受的配置对象：
- key

    存放唯一会话表示的cookie名称。默认为`connect.sid`
    
- store

    会话存储的实例。默认为`MemoryStore`实例。
    
- cookie

    会话cookie的cookie设置。
    
##　使用会话

使用请求对象的`session`变量的属性：
```apple js
req.session.userName = 'Anonymous'
let colorScheme = req.session.colorScheme || 'dark'
```
会话的获取和设置操作都是在`request`对象上操作的。

##　用会话实现即显消息

即显消息：在不破坏用户导航的前提下向用户提供反馈的一种方法。

## 会话的用途

当跨页保存用户的偏好时，可以用会话。会话最常见的用法是提供用户验证信息，登录之后就会创建一个会话。